var MultiMatch=function(c){var b=false;var a={init:function(f){f.addClass("multimatch_ui");var i=c("dt",f);var h=c("dl",f);var k=c("dd",f);var g=-1;var e;var d;var j=0;k.hide();i.each(function(){c(this).wrapInner('<a href="#"></a>')});i.each(function(l){c(this).next("dd").each(function(){var o=c(this);var m=o.find(".cor").length;var n;o.find("span.correct_statement").each(function(){c(this).remove()});if(b){o.find("span.itemfeedback").each(function(){n=c(this).remove()})}else{o.find("span.itemfeedback").each(function(){c(this).remove()})}o.prev("dt").data("questionInfo",{id:l,hiding:true,feedback:n,isComplete:false,total_correct:m,user_correct:0})})});h.on("click.DT","dt a",function(l){l.preventDefault();var n=c(this).parent();var m=n.next("dd");n.toggleClass("hasUserFocus");m.addClass("hasUserFocus").slideToggle(300);e=n.data("questionInfo").id;h.find("dt").each(function(){var o=c(this);if(o.data("questionInfo").id!=e){o.removeClass("hasUserFocus");o.next("dd").removeClass("hasUserFocus");if(!o.data("questionInfo").isComplete){o.next("dd").slideUp(300)}}});n.next("dd").each(function(){c(this).find("ul.ansArea li").each(function(){var o=c(this);if(c("a",o).length==0){var p=o.html();o.empty();o.append('<a href="#">'+p+"</a>")}})})});h.on("click.DD","dd a",function(o){o.preventDefault();var r=c(this);var n=r.closest("dd").prev("dt");var m=n.data("questionInfo").total_correct;var l;var q=r.parent().parent().parent();var s=r.parent().parent().parent().find("ul.feedback li");if(c(this).parent().hasClass("rightans")||c(this).parent().hasClass("wrongans")){return false}var p=r.closest("li");if(p.hasClass("cor")){r.parent().addClass("rightans");r.parent().addClass("bold").animate({"font-size":"1.2em"},300);n.data("questionInfo").user_correct++;l=n.data("questionInfo").user_correct;if(m>1&&l<m){if(s.text().length>0){s.animate({"font-size":0},300).empty()}else{s.css({"font-size":0})}s.append("Good Job, there are other answers as well").delay(300).animate({"font-size":"1em"},300)}if(l===m){q.animate({opacity:0},300,function(){r.parents("dd").addClass("isComplete").prev("dt").addClass("isComplete").data("questionInfo").isComplete=true;c(this).find("ul.ansArea li").each(function(){if(!c(this).hasClass("rightans")&&!c(this).hasClass("wrongans")){c(this).slideUp()}c(this).css({"font-size":".7em",margin:0});if(c(this).hasClass("rightans")){c(this).css("font-size","1em")}c(this).children().contents().unwrap('<a href="#"></a>')});q.delay(300).animate({opacity:1},300)});q.prev("dt").animate({opacity:0},300,function(){c(this).css({"font-size":"1em"});c(this).find("a").contents().unwrap('<a href="#"></a>');c(this).delay(300).animate({opacity:1},300)});if(b){s.animate({opacity:0},300,function(){s.empty().append(q.prev("dt").data("questionInfo").feedback).delay(300).animate({"font-size":"1em",opacity:1},300)})}else{q.find("ul.feedback li").animate({"font-size":0},500)}}}else{p.addClass("wrongans");if(s.text().length>0){s.animate({"font-size":0},300).empty()}s.append("There are better answers.").delay(300).animate({"font-size":"1em"},300)}})},feedback_set:function(d){b=true}};return{init:function(d){a.init(d)},feedback:function(d){a.feedback_set(d)}}}(jQuery);